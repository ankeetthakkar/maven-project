pipeline
{
  agent any
  stages
  {
     stage('scm checkout')
	 {
	   steps
	   {
	    git branch: 'master', url: 'https://github.com/ankeetthakkar/maven-project.git'
	   }
	 }
	 
	 stage('validate code')
	 {
	   steps
	   {
	     withMaven(jdk: 'jdk', maven: 'local maven') {
		 sh 'mvn validate'}
	   }
	 }
	 
	 stage('compile code')
	 {
	   steps
	   {
	     withMaven(jdk: 'jdk', maven: 'local maven') {
		 sh 'mvn compile'}
	   }
	 }
	 
	 stage('test code')
	 {
	   steps
	   {
	     withMaven(jdk: 'jdk', maven: 'local maven') {
		 sh 'mvn test'}
	   }
	 }
  
  }
}
